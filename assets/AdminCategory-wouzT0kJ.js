import{r as i,U as E,j as e,b as p,a6 as S,a7 as _,c as m,d as a}from"./index-FF5MpAmF.js";import{T as I}from"./TableSkeleton-CeV9_9D5.js";const B=()=>{const[y,n]=i.useState(!1),[u,l]=i.useState(!1),[o,g]=i.useState(""),[d,c]=i.useState(""),[b,f]=i.useState(null),{categories:h,getCategory:x,loading:j}=E(),N=async()=>{var t,s,r;if(!o.trim()){a(300,"Category name cannot be empty");return}try{await m.post("category/",{name:o}),a(200,"Category created successfully!"),n(!1),g(""),x()}catch(C){const k=((r=(s=(t=C.response)==null?void 0:t.data)==null?void 0:s.name)==null?void 0:r.join(", "))||"Error creating category";a(400,k)}},w=async()=>{if(!d.trim()){a(300,"Category name cannot be empty");return}try{await m.put(`category/${b}/`,{name:d}),a(200,"Category updated successfully!"),l(!1),c(""),x()}catch{a(400,"Error updating category")}},v=async(t,s)=>{try{const r=await m.patch(`category/${t}/`,{is_active:!s});console.log(r),a(200,`Category ${s?"blocked":"unblocked"}!`),x()}catch{a(400,"Error updating category status")}};return e.jsx(e.Fragment,{children:j?e.jsx(I,{}):e.jsxs("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 p-6 mt-10",children:[e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-700 mb-2 sm:mb-0",children:"Categories"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:()=>n(!0),className:"bg-indigo-800 text-white py-2 px-4 rounded-md hover:bg-indigo-900 transition duration-200",children:"Create Category"}),e.jsx(p,{to:"/admin/requested-category/",className:"bg-black text-white px-4 py-2 rounded-lg text-sm hover:bg-gray-800 transition duration-200",children:"Requested Categories"})]})]}),e.jsx("nav",{className:"flex mb-8","aria-label":"Breadcrumb",children:e.jsxs("ol",{className:"inline-flex items-center space-x-1 md:space-x-3",children:[e.jsx("li",{className:"inline-flex items-center",children:e.jsxs(p,{to:"/admin",className:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-indigo-600",children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Dashboard"]})}),e.jsx("li",{"aria-current":"page",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(_,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"ml-1 text-sm font-medium text-gray-500 md:ml-2",children:"Category"})]})})]})}),e.jsx("div",{className:"bg-white shadow-md border rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"ID"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Category Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:h.length>0?h.map((t,s)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("p",{className:"text-sm text-gray-900",children:s+1})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("p",{className:"text-sm text-gray-900",children:t.name})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.is_active?"Active":"Blocked"})}),e.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>v(t.id,t.is_active),className:`${t.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"} text-white px-3 py-1 rounded mr-2 transition duration-200`,children:t.is_active?"Block":"Unblock"}),e.jsx("button",{onClick:()=>{c(t.name),f(t.id),l(!0)},className:"bg-gray-200 text-gray-700 px-3 py-1 rounded hover:bg-gray-300 transition duration-200",children:"Edit"})]})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"px-4 py-3 text-center text-gray-500",children:"There are no categories"})})})]})})})]}),y&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex justify-center items-center",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-xl max-w-md w-full",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Create New Category"}),e.jsx("input",{type:"text",value:o,onChange:t=>g(t.target.value),placeholder:"Category Name",className:"w-full p-2 border border-gray-300 rounded mb-4"}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:N,className:"bg-indigo-800 text-white py-2 px-4 rounded hover:bg-indigo-900 transition duration-200",children:"Create"}),e.jsx("button",{onClick:()=>n(!1),className:"bg-gray-300 text-gray-700 py-2 px-4 rounded hover:bg-gray-400 transition duration-200",children:"Cancel"})]})]})}),u&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex justify-center items-center",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-xl max-w-md w-full",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Edit Category"}),e.jsx("input",{type:"text",value:d,onChange:t=>c(t.target.value),placeholder:"Category Name",className:"w-full p-2 border border-gray-300 rounded mb-4"}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:w,className:"bg-indigo-800 text-white py-2 px-4 rounded hover:bg-indigo-900 transition duration-200",children:"Save"}),e.jsx("button",{onClick:()=>l(!1),className:"bg-gray-300 text-gray-700 py-2 px-4 rounded hover:bg-gray-400 transition duration-200",children:"Cancel"})]})]})})]})})};export{B as default};
