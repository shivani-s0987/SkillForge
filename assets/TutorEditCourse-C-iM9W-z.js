import{r as m,A as b,a as x,U as g,j as e,c as f,d as y}from"./index-D7gKvvQE.js";import{u as j}from"./useFetchCourseDetails-B02cJrDn.js";const C=()=>{const[a,n]=m.useState({title:"",description:"",thumbnail:"",price:"",rental_price:"",rental_duration:"",category:""}),{slug:o}=b();console.log(o);const{courseDetails:l}=j(o);console.log(l),m.useEffect(()=>{l&&n({title:l.title||"",description:l.description||"",thumbnail:l.thumbnail||"",price:l.price||"",rental_price:l.rental_price||"",rental_duration:l.rental_duration||"",category:l.category||""})},[l]);const u=x(),{categories:d}=g(),p=async r=>{r.preventDefault(),console.log("course sumbit data",a);const t=new FormData;t.append("title",a.title),t.append("description",a.description),t.append("price",a.price),t.append("rental_price",a.rental_price),t.append("rental_duration",a.rental_duration),t.append("category",a.category),a.thumbnail&&typeof a.thumbnail!="string"&&t.append("thumbnail",a.thumbnail);try{const s=await f.put(`courses/${o}/`,t,{headers:{"Content-Type":"multipart/form-data"}});console.log(s),s.status===200&&(y(200,"Your course has been updated successfully"),u("/tutor/courses"))}catch(s){console.log(s)}},i=r=>{const{name:t,value:s}=r.target;n(c=>({...c,[t]:s}))},h=r=>{const{name:t,files:s}=r.target;n(c=>({...c,[t]:s[0]}))};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-6",children:"Edit Course"}),e.jsxs("form",{onSubmit:p,className:"bg-white p-6 border rounded-lg shadow-md",children:[e.jsxs("div",{className:"mb-4 flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"title",className:"block text-gray-700 mb-2",children:"Title"}),e.jsx("input",{type:"text",id:"title",name:"title",value:a.title,onChange:i,className:"w-full p-2 border border-gray-300 rounded",placeholder:"Course Title"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"category",className:"block text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{name:"category",id:"category",value:a.category,onChange:i,className:"w-full p-2 border border-gray-300 rounded",children:[e.jsx("option",{value:"",children:"Select a category"}),d&&d.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]})]}),e.jsxs("div",{className:"mb-4 flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"description",className:"block text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:a.description,onChange:i,className:"w-full p-2 border border-gray-300 rounded",placeholder:"Course Description"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"thumbnail",className:"block text-gray-700 mb-2",children:"Thumbnail URL"}),e.jsx("input",{type:"file",id:"thumbnail",name:"thumbnail",onChange:h,className:"text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",placeholder:"Thumbnail"}),a.thumbnail&&typeof a.thumbnail=="string"&&e.jsxs("p",{className:"mt-2 text-gray-600",children:["Current file: ",a.thumbnail.split("/").pop()]})]})]}),e.jsxs("div",{className:"mb-4 flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"price",className:"block text-gray-700 mb-2",children:"Price"}),e.jsx("input",{type:"number",id:"price",name:"price",value:a.price,onChange:i,className:"w-full p-2 border border-gray-300 rounded",placeholder:"Price"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"rental_price",className:"block text-gray-700 mb-2",children:"Rental Price"}),e.jsx("input",{type:"number",id:"rental_price",name:"rental_price",value:a.rental_price,onChange:i,className:"w-full p-2 border border-gray-300 rounded",placeholder:"Rental Price"})]})]}),e.jsx("div",{className:"mb-4 flex gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"rental_duration",className:"block text-gray-700 mb-2",children:"Rental Duration (days)"}),e.jsx("input",{type:"number",id:"rental_duration",name:"rental_duration",value:a.rental_duration,onChange:i,className:"w-full p-2 border border-gray-300 rounded",placeholder:"Rental Duration"})]})}),e.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white p-3 rounded-lg hover:bg-indigo-700 transition duration-300",children:"Update Course"})]})]})};export{C as default};
