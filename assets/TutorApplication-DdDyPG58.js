import{r as u,a as O,u as B,a4 as E,e as F,j as e,H as _,aA as w,c as Q,d as h,aB as I,aC as H}from"./index-B4p9qEZL.js";const T=()=>{const[o,b]=u.useState(1),[s,g]=u.useState({}),p=O(),f=B(),{tutorApplicationAccess:y}=E(r=>r.auth),k=F(),{email:$}=k.state||{};u.useEffect(()=>{y||p("/register")},[y,p]);const[a,c]=u.useState({profilePhoto:null,firstName:"",lastName:"",email:$,public_name:"",phone:"",headline:"",bio:"",dateOfBirth:"",experiences:[{workplace:"",position:"",startDate:"",endDate:""}],education:[{highestQualification:"",institute:"",year:""}],skills:"",cv:null}),C=async r=>{var m;r.preventDefault();const{isValid:t,errors:i}=w(a);if(console.log(a,t,i),t){const n=new FormData;n.append("first_name",a.firstName),n.append("last_name",a.lastName),n.append("email",a.email),n.append("display_name",a.public_name),n.append("phone",a.phone),n.append("headline",a.headline),n.append("bio",a.bio),n.append("dob",a.dateOfBirth),n.append("cv",a.cv),n.append("profile",a.profilePhoto),n.append("skills",a.skills.split(",")),n.append("education",JSON.stringify(a.education)),n.append("experiences",JSON.stringify(a.experiences));try{(await Q.post("tutor/",n)).status===201&&(h(200,"Account Created Successfully"),f(I(!1)),f(H(!0)),p("/tutor/application/done"))}catch(x){console.error("Error creating account",x),h(((m=x.response)==null?void 0:m.status)||500,"Failed to create account")}}else g(i),h(400,"Please complete your application")},l=r=>{const{name:t,value:i}=r.target;c({...a,[t]:i})},j=r=>{const{name:t,files:i}=r.target;c({...a,[t]:i[0]})},d=(r,t,i,m)=>{const n=[...a[t]];n[r][i]=m,c({...a,[t]:n})},N=r=>{r==="experiences"?c({...a,experiences:[...a.experiences,{workplace:"",position:"",startDate:"",endDate:""}]}):r==="education"&&c({...a,education:[...a.education,{highestQualification:"",institute:"",year:""}]})},v=(r,t)=>{const i=[...a[t]];i.splice(r,1),c({...a,[t]:i})},D=r=>{const{errors:t}=w(a);switch(g(t),r){case 1:return!t.firstName&&!t.lastName&&!t.public_name&&!t.phone&&!t.dateOfBirth&&!t.profilePhoto;case 2:return!t.headline&&!t.bio&&!t.skills&&!t.cv;case 3:return!t.experiences&&!t.education;default:return!1}},A=()=>{D(o)&&b(o+1)},S=()=>b(o-1),P=()=>{switch(o){case 1:return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-900",children:[" ","Photo"]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"h-20 w-20 rounded-full overflow-hidden bg-gray-100",children:e.jsx("img",{src:a.profilePhoto&&URL.createObjectURL(a.profilePhoto),className:"w-full"})}),e.jsx("input",{type:"file",name:"profilePhoto",onChange:j,accept:"image/*",className:"text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"})]}),s.profilePhoto&&e.jsx("p",{className:"text-red-500 text-sm",children:s.profilePhoto}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First name"}),e.jsx("input",{type:"text",name:"firstName",value:a.firstName,onChange:l,className:`w-full px-3 py-2 border ${s.firstName?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`}),s.firstName&&e.jsx("p",{className:"text-red-500 text-sm",children:s.firstName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last name"}),e.jsx("input",{type:"text",name:"lastName",value:a.lastName,onChange:l,className:`w-full px-3 py-2 border ${s.lastName?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`}),s.lastName&&e.jsx("p",{className:"text-red-500 text-sm",children:s.lastName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Public Name"}),e.jsx("input",{type:"text",name:"public_name",value:a.public_name,onChange:l,className:`w-full px-3 py-2 border ${s.public_name?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`}),s.public_name&&e.jsx("p",{className:"text-red-500 text-sm",children:s.public_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:a.email,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",disabled:!0,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsx("input",{type:"tel",name:"phone",value:a.phone,onChange:l,className:`w-full px-3 py-2 border ${s.phone?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`}),s.phone&&e.jsx("p",{className:"text-red-500 text-sm",children:s.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),e.jsx("input",{type:"date",name:"dateOfBirth",value:a.dateOfBirth,onChange:l,className:`w-full px-3 py-2 border ${s.dateOfBirth?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`}),s.dateOfBirth&&e.jsx("p",{className:"text-red-500 text-sm",children:s.dateOfBirth})]})]})]})});case 2:return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Headline"}),e.jsx("input",{type:"text",name:"headline",value:a.headline,onChange:l,className:`w-full px-3 py-2 border ${s.headline?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`}),s.headline&&e.jsx("p",{className:"text-red-500 text-sm",children:s.headline})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bio"}),e.jsx("textarea",{name:"bio",value:a.bio,onChange:l,rows:"4",className:`w-full px-3 py-2 border ${s.bio?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`}),s.bio&&e.jsx("p",{className:"text-red-500 text-sm",children:s.bio})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Skills (comma-separated)"}),e.jsx("input",{type:"text",name:"skills",value:a.skills,onChange:l,className:`w-full px-3 py-2 border ${s.skills?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`}),s.skills&&e.jsx("p",{className:"text-red-500 text-sm",children:s.skills})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Upload CV"}),e.jsx("input",{type:"file",name:"cv",onChange:j,accept:".pdf,.doc,.docx",className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"}),s.cv&&e.jsx("p",{className:"text-red-500 text-sm",children:s.cv})]})]})});case 3:return e.jsx(e.Fragment,{children:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"text-lg font-medium mb-2",children:"Experience"}),a.experiences.map((r,t)=>e.jsxs("div",{className:"mb-4 p-4 border rounded-md relative",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Workplace"}),e.jsx("input",{type:"text",value:r.workplace,onChange:i=>d(t,"experiences","workplace",i.target.value),className:`w-full px-3 py-2 border ${`${t}`,"border-red-500"} rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`}),s[`experiences[${t}].workplace`]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s[`experiences[${t}].workplace`]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Position"}),e.jsx("input",{type:"text",value:r.position,onChange:i=>d(t,"experiences","position",i.target.value),className:`w-full px-3 py-2 border ${`${t}`,"border-red-500"} rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`}),s[`experiences[${t}].position`]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s[`experiences[${t}].position`]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:r.startDate,onChange:i=>d(t,"experiences","startDate",i.target.value),className:`w-full px-3 py-2 border ${`${t}`,"border-red-500"} rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`}),s[`experiences[${t}].startDate`]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s[`experiences[${t}].startDate`]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:r.endDate,onChange:i=>d(t,"experiences","endDate",i.target.value),className:`w-full px-3 py-2 border ${`${t}`,"border-red-500"} rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500`}),s[`experiences[${t}].endDate`]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s[`experiences[${t}].endDate`]})]})]}),t>0?e.jsx("button",{type:"button",onClick:()=>v(t,"experiences"),className:"absolute top-2 right-2",children:e.jsx("img",{src:"/close-icon.png",alt:"remove",className:"w-6 h-6"})}):""]},t)),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{type:"button",onClick:()=>N("experiences"),className:"px-4 py-2 bg-indigo-500 text-white rounded-md hover:bg-indigo-600 transition duration-300",children:"Add"})})]}),e.jsx("h4",{className:"text-lg font-medium mb-2",children:"Education"}),a.education.map((r,t)=>e.jsxs("div",{className:"mb-4 p-4 border rounded-md relative",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Highest Qualification"}),e.jsx("input",{type:"text",value:r.highestQualification,onChange:i=>d(t,"education","highestQualification",i.target.value),className:`w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm ${s[`education[${t}].highestQualification`]?"border-red-500":""}`}),s[`education[${t}].highestQualification`]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s[`education[${t}].highestQualification`]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Institute"}),e.jsx("input",{type:"text",value:r.institute,onChange:i=>d(t,"education","institute",i.target.value),className:`w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm ${s[`education[${t}].highestQualification`]?"border-red-500":""}`}),s[`education[${t}].institute`]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s[`education[${t}].institute`]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"}),e.jsx("input",{type:"date",value:r.year,onChange:i=>d(t,"education","year",i.target.value),className:`w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm ${s[`education[${t}].year`]?"border-red-500":""}`}),s[`education[${t}].year`]&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s[`education[${t}].year`]})]})]}),t>0?e.jsx("button",{type:"button",onClick:()=>v(t,"education"),className:"absolute top-2 right-2",children:e.jsx("img",{src:"/close-icon.png",alt:"remove",className:"w-6 h-6"})}):""]},t)),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{type:"button",onClick:()=>N("education"),className:"mt-2 px-4 py-2 bg-indigo-500 text-white rounded-md hover:bg-indigo-600",children:"Add"})})]})})});default:return null}};return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx(_,{}),e.jsx("div",{className:"min-h-screen bg-white",children:e.jsx("main",{className:"max-w-3xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden sm:rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("h2",{className:"text-center text-3xl font-bold text-gray-700 mb-10",children:"Apply as a Tutor"}),e.jsx("div",{className:"flex justify-between mb-8",children:["Personal Information","Profile Information","Experience & Education"].map((r,t)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${o>t?"bg-indigo-500":"bg-gray-200"} flex items-center justify-center`,children:e.jsx("span",{className:`text-sm ${o>t?"text-white":"text-gray-500"}`,children:t+1})}),e.jsx("span",{className:`text-sm mt-2 ${o>t?"text-indigo-500":"text-gray-500"}`,children:r})]},t))}),e.jsxs("form",{onSubmit:C,children:[P(),e.jsxs("div",{className:"mt-8 flex justify-between",children:[o>1?e.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Previous"}):e.jsx("div",{}),o<3?e.jsx("button",{type:"button",onClick:A,className:"px-4 py-2 bg-indigo-500 text-white rounded-md hover:bg-indigo-600",children:"Next"}):e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600",children:"Submit application"})]})]})]})})})})]})};export{T as default};
