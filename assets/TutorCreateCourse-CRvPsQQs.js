import{r as p,a as b,U as h,j as e,aF as u,aG as g,aH as j,aI as r,aJ as s,L as f,c as N,d as i}from"./index-B4p9qEZL.js";const k=()=>{const[d,y]=p.useState({title:"",description:"",thumbnail:"",price:"",rentalPrice:"",rentalDuration:"",category:"",skill_level:""}),m=b(),{categories:o}=h(),x=async(l,n)=>{console.log(d);const t=new FormData;t.append("title",l.title),t.append("description",l.description),t.append("thumbnail",l.thumbnail),t.append("price",l.price),t.append("rental_price",l.rentalPrice?l.rentalPrice:""),t.append("rental_duration",l.rentalDuration?l.rentalDuration:""),t.append("category",l.category),t.append("skill_level",l.skill_level);try{const a=await N.post("courses/",t,{headers:{"Content-Type":"multipart/form-data"}});console.log(a),a.status===201&&(i(200,"Your course has been created successfully"),n.resetForm(),m(`/tutor/new-module/${a.data.id}`))}catch(a){console.log(a),a.response&&a.response.data?Object.keys(a.response.data).forEach(c=>{i(400,`${c} : ${a.response.data[c]}`)}):i(400,"Something went wrong")}finally{n.setSubmitting(!1)}};return e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-6",children:"Create New Course"}),e.jsx(u,{initialValues:{title:"",description:"",price:"",rentalPrice:"",rentalDuration:"",category:"",skill_level:"",thumbnail:null},validationSchema:g,onSubmit:x,children:({setFieldValue:l,isSubmitting:n,values:t})=>e.jsxs(j,{className:"bg-white p-6 rounded-lg border shadow-md",children:[e.jsxs("div",{className:"mb-4 flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"title",className:"block text-gray-700 mb-2",children:"Title"}),e.jsx(r,{name:"title",className:"w-full p-2 border border-gray-300 rounded",placeholder:"Course Title"}),e.jsx(s,{name:"title",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"category",className:"block text-gray-700 mb-2",children:"Category"}),e.jsxs(r,{as:"select",name:"category",className:"w-full p-2 border border-gray-300 rounded",children:[e.jsx("option",{value:"",children:"Select a category"}),o&&o.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),e.jsx(s,{name:"category",component:"div",className:"text-red-500 text-sm"})]})]}),e.jsxs("div",{className:"mb-4 flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"description",className:"block text-gray-700 mb-2",children:"Description"}),e.jsx(r,{as:"textarea",name:"description",className:"w-full p-2 border border-gray-300 rounded",placeholder:"Course Description"}),e.jsx(s,{name:"description",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"thumbnail",className:"block text-gray-700 mb-2",children:"Thumbnail"}),e.jsx("input",{id:"thumbnail",name:"thumbnail",type:"file",className:"text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",onChange:a=>l("thumbnail",a.target.files[0])}),e.jsx(s,{name:"thumbnail",component:"div",className:"text-red-500 text-sm"})]})]}),e.jsxs("div",{className:"mb-4 flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"price",className:"block text-gray-700 mb-2",children:"Price"}),e.jsx(r,{name:"price",type:"number",className:"w-full p-2 border border-gray-300 rounded",placeholder:"Price"}),e.jsx(s,{name:"price",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"skill_level",className:"block text-gray-700 mb-2",children:"Skill Level"}),e.jsxs(r,{as:"select",name:"skill_level",className:"w-full p-2 border border-gray-300 rounded",children:[e.jsx("option",{value:"",children:"Select a level"}),e.jsx("option",{value:"Beginner",children:"Beginner"}),e.jsx("option",{value:"Intermediate",children:"Intermediate"}),e.jsx("option",{value:"Advanced",children:"Advanced"})]}),e.jsx(s,{name:"skill_level",component:"div",className:"text-red-500 text-sm"})]})]}),e.jsxs("div",{className:"mb-4 flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"rentalDuration",className:"block text-gray-700 mb-2",children:"Rental Duration (days)"}),e.jsx(r,{name:"rentalDuration",type:"number",className:"w-full p-2 border border-gray-300 rounded",placeholder:"Rental Duration"}),e.jsx(s,{name:"rentalDuration",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"rentalPrice",className:"block text-gray-700 mb-2",children:"Rental Price"}),e.jsx(r,{name:"rentalPrice",type:"number",className:"w-full p-2 border border-gray-300 rounded",placeholder:"Rental Price"}),e.jsx(s,{name:"rentalPrice",component:"div",className:"text-red-500 text-sm"})]})]}),e.jsx("button",{type:"submit",className:"w-full bg-indigo-700 text-white p-3 rounded-lg hover:bg-indigo-800 transition duration-300",disabled:n,children:n?e.jsx(f,{}):"Create Course"})]})})]})};export{k as default};
