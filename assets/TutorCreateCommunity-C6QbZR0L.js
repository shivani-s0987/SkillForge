import{r as p,a as b,U as u,j as e,aF as h,aX as g,aH as f,aI as i,aJ as r,L as y,c as j,d as l}from"./index-D7gKvvQE.js";const C=()=>{const[c,N]=p.useState({name:"",description:"",banner:"",max_participants:""}),d=b(),{categories:o}=u(),x=async(s,n)=>{console.log(c);const t=new FormData;t.append("name",s.name),t.append("description",s.description),t.append("banner",s.banner),t.append("max_participants",s.max_participants);try{const a=await j.post("create-community/",t,{headers:{"Content-Type":"multipart/form-data"}});console.log(a),a.status===201&&(l(200,"Your Community has been created successfully"),n.resetForm(),d("/tutor/community/"))}catch(a){console.log(a),a.response&&a.response.data?Object.keys(a.response.data).forEach(m=>{l(400,`${m} : ${a.response.data[m]}`)}):l(400,"Something went wrong")}finally{n.setSubmitting(!1)}};return e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-6",children:"Create New Community"}),e.jsx(h,{initialValues:{name:"",description:"",banner:"",max_participants:""},validationSchema:g,onSubmit:x,children:({setFieldValue:s,isSubmitting:n,values:t})=>e.jsxs(f,{className:"bg-white p-6 rounded-lg border",children:[e.jsxs("div",{className:"mb-4 flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"name",className:"block text-gray-700 mb-2",children:"Name"}),e.jsx(i,{name:"name",className:"w-full p-2 border border-gray-300 rounded",placeholder:"Community Name"}),e.jsx(r,{name:"name",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"category",className:"block text-gray-700 mb-2",children:"Category"}),e.jsxs(i,{as:"select",name:"category",className:"w-full p-2 border border-gray-300 rounded",children:[e.jsx("option",{value:"",children:"Select a category"}),o&&o.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),e.jsx(r,{name:"category",component:"div",className:"text-red-500 text-sm"})]})]}),e.jsxs("div",{className:"mb-4 flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"description",className:"block text-gray-700 mb-2",children:"Description"}),e.jsx(i,{as:"textarea",name:"description",className:"w-full p-2 border border-gray-300 rounded",placeholder:"Community Description"}),e.jsx(r,{name:"description",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"banner",className:"block text-gray-700 mb-2",children:"Banner"}),e.jsx("input",{id:"banner",name:"Banner",type:"file",className:"text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",onChange:a=>s("banner",a.target.files[0])}),e.jsx(r,{name:"banner",component:"div",className:"text-red-500 text-sm"})]})]}),e.jsx("div",{className:"mb-4 flex gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"max_participants",className:"block text-gray-700 mb-2",children:"Max Participants"}),e.jsx(i,{name:"max_participants",type:"number",className:"w-full p-2 border border-gray-300 rounded",placeholder:"Max Paticipants"}),e.jsx(r,{name:"max_participants",component:"div",className:"text-red-500 text-sm"})]})}),e.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white p-3 rounded-lg hover:bg-indigo-700 transition duration-300",disabled:n,children:n?e.jsx(y,{}):"Create Community"})]})})]})};export{C as default};
