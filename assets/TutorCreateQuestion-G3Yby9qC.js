import{r as u,A as w,a as N,j as e,c as v,d}from"./index-FF5MpAmF.js";const q=()=>{const[l,m]=u.useState(""),[o,i]=u.useState([{option_text:"",is_correct:!1}]),[a,f]=u.useState({}),{id:p}=w(),g=N(),h=()=>{o.length<4&&i([...o,{option_text:"",is_correct:!1}])},b=()=>{let t={};return l.trim()===""&&(t.questionText="Question text is required"),o.some(s=>s.is_correct)||(t.correctOption="At least one option must be marked as correct"),t},x=async(t,s)=>{t.preventDefault();const r=b();if(f(r),Object.keys(r).length>0)return;const c={question_text:l,contest:p,options:o};try{(await v.post("question/",c,{headers:{"Content-Type":"application/json"}})).status===201&&(s==="addAnother"?(d(200,"Question created successfully!"),m(""),i([{option_text:"",is_correct:!1}])):s==="finish"&&(d(200,"Contest Question creation completed"),g("/tutor/contest/")))}catch(n){console.error("Error creating question:",n),n.response&&n.response.data?Object.entries(n.response.data).forEach(([j,y])=>{d(400,`${j}: ${y}`)}):d(400,"Error creating question")}};return e.jsxs("div",{className:"max-w-6xl p-4 mx-auto",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-6",children:"Add New Question"}),e.jsxs("form",{className:"bg-white p-6 rounded-lg border space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"question_text",className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text"}),e.jsx("textarea",{id:"question_text",name:"question_text",rows:"3",value:l,onChange:t=>m(t.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your question here"}),a.questionText&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.questionText})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Options"}),e.jsx("div",{className:"space-y-3",children:o.map((t,s)=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsx("input",{type:"text",value:t.option_text,onChange:r=>{const c=[...o];c[s].option_text=r.target.value,i(c)},className:"flex-grow p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:`Option ${String.fromCharCode(65+s)}`}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.is_correct,onChange:()=>{const r=[...o];r[s].is_correct=!r[s].is_correct,i(r)},className:"rounded text-indigo-600 focus:ring-indigo-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Correct"})]})]},s))}),a.correctOption&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.correctOption}),o.length<4&&e.jsx("button",{type:"button",onClick:h,className:"mt-3 inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Add Option"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("button",{onClick:t=>x(t,"addAnother"),type:"button",className:"w-full sm:w-1/2 flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-600 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Save and Add Another"}),e.jsx("button",{onClick:t=>x(t,"finish"),type:"button",className:"w-full sm:w-1/2 flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Save and Finish"})]})]})]})};export{q as default};
