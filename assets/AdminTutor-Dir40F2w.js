import{au as k,j as e,av as A,g as R,w as N,ac as _,aw as L,r as i,ax as $,a as B,a4 as z,b as F,a6 as P,a7 as E,ay as q,C as V,c as C,d as y}from"./index-D7gKvvQE.js";/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=k("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=k("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),O="http://127.0.0.1:8000",Q=({tutor:s,onStatusChange:x,onBlockToggle:c,onClick:u})=>{var n,o,r,h,f,p,j,b,a,t;const m={Verified:"bg-green-100 text-green-800",Rejected:"bg-red-100 text-red-800",Pending:"bg-yellow-100 text-yellow-800",Requested:"bg-blue-100 text-blue-800",default:"bg-gray-100 text-gray-800"};return e.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300 ease-in-out",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4 cursor-pointer",onClick:u,children:[e.jsx("img",{src:`${(n=s.user)==null?void 0:n.profile}`,alt:`${(o=s.user)==null?void 0:o.username}'s profile`,className:"w-16 h-16 rounded-full mr-4 object-cover border-2 border-blue-500"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:`${(r=s.user)==null?void 0:r.first_name} ${(h=s.user)==null?void 0:h.last_name}`.trim()}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${m[s.status]||m.default}`,children:s==null?void 0:s.status})]})]}),e.jsxs("div",{className:"space-y-2 text-sm mb-4 text-gray-600",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx(A,{className:"mr-2",size:16})," ",(f=s.user)==null?void 0:f.email]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(M,{className:"mr-2",size:16})," ",((p=s.user)==null?void 0:p.phone)||"N/A"]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(R,{className:"mr-2",size:16})," Courses:"," ",s.total_courses||"Nil"]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(_,{className:"mr-2",size:16})," Registered:"," ",N(new Date((j=s.user)==null?void 0:j.date_joined))||"N/A"]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx(L,{className:"mr-2",size:16})," Last Login:"," ",N(new Date((b=s.user)==null?void 0:b.last_login))||"N/A"]})]}),e.jsxs("div",{className:"flex flex-wrap justify-between gap-2",children:[e.jsx("a",{href:`${O}${s.cv}`,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded text-sm transition duration-300 ease-in-out flex-grow md:flex-grow-0",children:"View CV"}),s.status==="Requested"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>x(s.id,"Verified"),className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded text-sm transition duration-300 ease-in-out flex-grow md:flex-grow-0",children:"Accept"}),e.jsx("button",{onClick:()=>x(s.id,"Rejected"),className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded text-sm transition duration-300 ease-in-out flex-grow md:flex-grow-0",children:"Reject"})]}),s.status==="Verified"&&e.jsx("button",{onClick:l=>{l.stopPropagation(),c(s.user.id,s.user.is_active)},className:`${(a=s.user)!=null&&a.is_active?"bg-yellow-500 hover:bg-yellow-700":"bg-gray-500 hover:bg-gray-700"} text-white font-bold py-2 px-4 rounded text-sm transition duration-300 ease-in-out flex-grow md:flex-grow-0`,children:(t=s.user)!=null&&t.is_active?"Block":"Unblock"})]})]})})},U=()=>{const[s,x]=i.useState([]),[c,u]=i.useState(null),[m,n]=i.useState(!1),o=async()=>{n(!0);try{const r=await $();x(r)}catch(r){console.error("Error fetching Tutor:",r),u(r)}finally{n(!1)}};return i.useEffect(()=>{o()},[]),{tutors:s,getTutors:o,loading:m}},I=()=>{const[s,x]=i.useState(""),[c,u]=i.useState(""),m=B();z(a=>a.sidebar.isSidebarOpen);const{tutors:n,getTutors:o,loading:r}=U(),[h,f]=i.useState([]);i.useEffect(()=>{f(n.filter(a=>{var t,l,g;return(((t=a.user)==null?void 0:t.first_name.toLowerCase())+" "+((l=a.user)==null?void 0:l.last_name.toLowerCase())).includes(s.toLowerCase())||((g=a.user)==null?void 0:g.email.toLowerCase().includes(s.toLowerCase()))}).filter(a=>c===""||a.status===c))},[n,s,c]);const p=async(a,t)=>{var l,g,w,v;try{await C.patch(`tutor/${a}/`,{status:t}),y(200,"Status updated successfully"),o()}catch(d){console.error("Change status error:",d);const S=((l=d==null?void 0:d.response)==null?void 0:l.status)||400,T=((v=(w=(g=d==null?void 0:d.response)==null?void 0:g.data)==null?void 0:w.status)==null?void 0:v[0])||"We are facing some issues. Please try again";y(S,T)}},j=async(a,t)=>{try{await C.patch(`user/${a}/status/`,{is_active:!t}),o(),y(200,`Tutor ${t?"blocked":"unblocked"} successfully`)}catch(l){console.error("Block toggle error:",l),y(400,"Failed to update tutor status. Please try again later")}},b=a=>{m(`/admin/tutor/${a}`)};return e.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 p-6 mt-10",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-4 flex flex-col sm:flex-row justify-between items-center",children:e.jsx("h1",{className:"text-3xl font-bold text-gray-700 mb-2 sm:mb-0",children:"Tutor's"})}),e.jsx("nav",{className:"flex mb-8","aria-label":"Breadcrumb",children:e.jsxs("ol",{className:"inline-flex items-center space-x-1 md:space-x-3",children:[e.jsx("li",{className:"inline-flex items-center",children:e.jsxs(F,{to:"/admin",className:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-indigo-600",children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),"Dashboard"]})}),e.jsx("li",{"aria-current":"page",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"ml-1 text-sm font-medium text-gray-500 md:ml-2",children:"Tutor's"})]})})]})}),e.jsxs("div",{className:"mb-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"relative flex-grow md:max-w-md",children:[e.jsx("input",{type:"text",placeholder:"Search by name or email",value:s,onChange:a=>x(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:c,onChange:a=>u(a.target.value),className:"w-full md:w-auto pl-10 pr-8 py-2 border border-gray-300 rounded-lg appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Requested",children:"Requested"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Rejected",children:"Rejected"}),e.jsx("option",{value:"Blocked",children:"Blocked"})]}),e.jsx(D,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r?[...Array(6)].map((a,t)=>e.jsx(V,{},t)):h.map(a=>e.jsx(Q,{tutor:a,onStatusChange:p,onBlockToggle:j,onClick:()=>b(a.id)},a.id))})]})})};export{I as default};
