import{a as N,r as m,j as e,b as u,a6 as v,a7 as C,C as w,c as x,d as o}from"./index-DyLBUoN5.js";import{A as k}from"./AdminCourseCard-D-4ch7iX.js";import{u as _,P as A}from"./Pagination-aPftAUAt.js";import"./pagination-Ds2vz60o.js";const B=()=>{var d;const{courses:r,getCourses:i,setPage:g,page:t,totalPages:c,loading:h}=_(),p=N(),[f,l]=m.useState(!1);m.useEffect(()=>{i(t)},[t]);const j=s=>{s>=1&&s<=c&&(g(s),p(`/admin/courses/?page=${s}`))},b=async(s,a)=>{l(!0);try{await x.patch(`courses/${s}/`,{status:a}),await i(t),o(200,"Course status updated successfully")}catch(n){console.error("Error updating course status:",n),o(400,"Failed to update course status")}finally{l(!1)}},y=async(s,a)=>{l(!0);try{await x.patch(`courses/${s}/`,{is_active:!a}),await i(t),o(200,`Course ${a?"blocked":"unblocked"} successfully`)}catch(n){console.error("Error toggling course block status:",n),o(400,"Failed to update course block status")}finally{l(!1)}};return e.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 p-6 mt-10",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-700 mb-2 sm:mb-0",children:"Courses"}),e.jsxs(u,{to:"/admin/course/requested",className:"relative inline-block",children:[e.jsx("button",{className:"bg-black text-white px-4 py-2 rounded-lg text-sm hover:bg-gray-800 transition duration-200",children:"Requested"}),((d=r[0])==null?void 0:d.requested_course_count)>0&&e.jsx("span",{className:"absolute top-0 right-0 transform translate-x-1/2 -translate-y-1/2 bg-red-600 text-white rounded-full text-xs px-2 py-1 font-semibold shadow-lg",children:r[0].requested_course_count})]})]}),e.jsx("nav",{className:"flex mb-8","aria-label":"Breadcrumb",children:e.jsxs("ol",{className:"inline-flex items-center space-x-1 md:space-x-3",children:[e.jsx("li",{className:"inline-flex items-center",children:e.jsxs(u,{to:"/admin",className:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-indigo-600",children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),"Dashboard"]})}),e.jsx("li",{"aria-current":"page",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"ml-1 text-sm font-medium text-gray-500 md:ml-2",children:"Courses"})]})})]})}),f?e.jsx("div",{className:"flex justify-center items-center h-40",children:e.jsx("div",{className:"animate-spin rounded-full h-28 w-28 border-t-2 border-b-2 border-gray-900"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:h?[...Array(6)].map((s,a)=>e.jsx(w,{},a)):r.map((s,a)=>e.jsx(k,{course:s,onBlockToggle:y,onStatusToggle:b},a))}),r.length>0&&e.jsx("div",{className:"mt-6",children:e.jsx(A,{totalPages:c,onPageChange:j,page:t})})]})]})})};export{B as default};
